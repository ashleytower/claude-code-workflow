{
  "includeCoAuthoredBy": true,
  "permissions": {
    "allow": [
      "*",
      "Bash(npm *)",
      "Bash(git *)",
      "Bash(node *)",
      "Bash(python *)",
      "Bash(docker *)",
      "WebFetch(domain:*)",
      "Bash(grep:*)",
      "Bash(/Users/ashleytower/.claude/scripts/update-agents-with-state.sh:*)",
      "Bash(wc:*)",
      "Bash(git init:*)",
      "Bash(git add:*)",
      "Bash(git commit:*)",
      "Bash(ls:*)",
      "Bash(crontab:*)",
      "Bash(~/.claude/scripts/verify-hooks.sh)",
      "Bash(test:*)",
      "Bash(gh auth status:*)",
      "Bash(curl:*)",
      "mcp__rube__RUBE_SEARCH_TOOLS",
      "mcp__rube__RUBE_MULTI_EXECUTE_TOOL",
      "Bash(git remote add:*)",
      "Bash(git push:*)",
      "Bash(~/.claude/scripts/speak.sh:*)",
      "Bash(echo:*)",
      "Bash(cat:*)",
      "Bash(afplay:*)",
      "Bash(~/.claude/scripts/agent-state.sh:*)",
      "Skill(*)",
      "Skill(ralph-loop)",
      "Bash(npm uninstall:*)",
      "Bash(npm install:*)",
      "Bash(npx drizzle-kit:*)",
      "Bash(nslookup:*)",
      "Bash(host:*)",
      "Bash(ping:*)",
      "Bash(sudo dscacheutil:*)",
      "Bash(sudo killall:*)",
      "Bash(dig:*)",
      "Bash(node -e:*)",
      "Bash(npx tsx:*)",
      "Bash(done)",
      "Bash(npm run check:*)",
      "Bash(npx vercel:*)",
      "Bash(while IFS='=' read -r key value)",
      "Bash(do [ -n \"$key\" ])",
      "Bash(vercel:*)",
      "mcp__rube__RUBE_GET_TOOL_SCHEMAS",
      "Bash(npm run build:*)",
      "Bash(xargs cat:*)",
      "Bash(npm test:*)",
      "Bash(claude --teleport session_01PxU8tjAqVbE3Q4TpmedBpw)",
      "Bash(claude --resume:*)",
      "Bash(python3 -m json.tool:*)",
      "WebSearch",
      "WebFetch(domain:claudelog.com)",
      "WebFetch(domain:www.eesel.ai)",
      "WebFetch(domain:github.com)",
      "mcp__rube__RUBE_REMOTE_WORKBENCH",
      "mcp__rube__RUBE_REMOTE_BASH_TOOL",
      "mcp__rube__RUBE_MANAGE_CONNECTIONS",
      "mcp__rube__RUBE_CREATE_PLAN",
      "mcp__rube__RUBE_EXECUTE_RECIPE",
      "mcp__rube__RUBE_FIND_RECIPE",
      "mcp__context7__resolve-library-id",
      "mcp__context7__query-docs",
      "mcp__github__*",
      "mcp__sequential-thinking__sequentialthinking",
      "Task(subagent_type:*)",
      "Task(subagent_type:Explore)",
      "Task(subagent_type:Plan)",
      "Task(subagent_type:frontend)",
      "Task(subagent_type:backend)",
      "Task(subagent_type:verify-app)",
      "Task(subagent_type:bash)",
      "Edit(**)",
      "Write(**)",
      "Read(**)",
      "Glob(**)",
      "Grep(**)",
      "AskUserQuestion",
      "TodoWrite",
      "EnterPlanMode",
      "ExitPlanMode",
      "Bash(~/.claude/scripts/*)",
      "Bash(./.claude/hooks/*)",
      "Bash(supabase:*)",
      "Bash(vercel deploy:*)",
      "Bash(gh pr create:*)",
      "Bash(gh pr merge:*)",
      "Bash(gh issue create:*)",
      "Bash(mkdir:*)"
    ],
    "deny": [
      "Bash(rm -rf /)",
      "Bash(rm -rf ~)",
      "Bash(sudo:*)",
      "Bash(chmod 777:*)",
      "Bash(dd:*)",
      "Bash(git push --force:*)",
      "Bash(git push -f:*)",
      "Bash(vercel deploy --prod:*)",
      "Bash(vercel --prod:*)",
      "Bash(npm publish:*)",
      "Bash(rm -rf *)",
      "Bash(rm -r *)",
      "mcp__rube__*STRIPE*",
      "mcp__rube__*stripe*",
      "Bash(stripe:*)",
      "Bash(curl *stripe.com*)",
      "Bash(curl *api/send-email*)",
      "Bash(curl *resend.com*)",
      "mcp__rube__*RESEND*",
      "mcp__rube__*resend*",
      "mcp__rube__*EMAIL*SEND*",
      "Bash(supabase db reset:*)",
      "Bash(supabase db dump:*)",
      "Bash(git reset --hard:*)"
    ]
  },
  "enableAllProjectMcpServers": true,
  "enabledMcpjsonServers": [
    "slack",
    "rube"
  ],
  "hooks": {
    "SessionStart": [
      {
        "matcher": "*",
        "hooks": [
          {
            "type": "command",
            "command": "~/.claude/scripts/check-updates.sh &"
          },
          {
            "type": "command",
            "command": "~/.claude/scripts/notify.sh 'Claude Code session started' 'Claude Code' &"
          },
          {
            "type": "command",
            "command": "~/.claude/scripts/speak.sh 'Ready to build' &"
          },
          {
            "type": "prompt",
            "prompt": "AGENT COORDINATION:\n\nCheck for previous agent state:\n  ~/.claude/scripts/agent-state.sh read\n\nIf state exists:\n- Review what the previous agent did\n- Check next_steps from previous agent\n- Continue seamlessly from their work\n\nThis enables multi-agent coordination."
          }
        ]
      }
    ],
    "PreToolUse": [
      {
        "matcher": "Write|Edit|AskUserQuestion",
        "hooks": [
          {
            "type": "command",
            "command": "~/.claude/scripts/check-explored.sh || true"
          },
          {
            "type": "prompt",
            "prompt": "â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”\nðŸš¨ EXPLORATION-FIRST MANDATE - CANNOT BE BYPASSED ðŸš¨\nâ”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”\n\nBEFORE any Write, Edit, or AskUserQuestion:\n\n1. Have you used Task(Explore) or Read to examine the ACTUAL codebase?\n2. Can you cite SPECIFIC files/lines you've read?\n3. Are you making ANY assumptions about:\n   - Tech stack (frameworks, libraries, versions)?\n   - Features (what's implemented vs not)?\n   - Architecture (how code is organized)?\n\nIF YOU HAVE NOT EXPLORED THE CODE:\nâ”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”\nâ›” STOP IMMEDIATELY\nâ›” Use Task tool with subagent_type=Explore\nâ›” Read actual implementation files\nâ›” Mark exploration complete: ~/.claude/scripts/agent-state.sh mark-explored\nâ›” THEN proceed\nâ”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”\n\nNO ASSUMPTIONS. NO GUESSING. READ FIRST.\n\nExamples of VIOLATIONS:\nâŒ \"This uses GPT-4o\" (without reading imports)\nâŒ \"Create CLAUDE.md with...\" (without reading code)\nâŒ \"The architecture is...\" (without examining files)\n\nExamples of CORRECT:\nâœ… Task(Explore) â†’ Read package.json:18 â†’ \"Uses @google/genai\"\nâœ… Read server/routes.ts:45 â†’ \"API uses tRPC\"\n\nProceed ONLY after exploration is COMPLETE."
          }
        ]
      },
      {
        "matcher": "Write|Edit",
        "hooks": [
          {
            "type": "command",
            "command": "~/.claude/scripts/check-skills.sh"
          },
          {
            "type": "prompt",
            "prompt": "â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”\nðŸš¨ MANDATORY PRE-CODE CHECKLIST - CANNOT BE BYPASSED ðŸš¨\nâ”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”\n\nBefore ANY Write or Edit operation, you MUST:\n\n1. âœ“ READ official documentation (WebFetch or /research)\n   â””â”€ NO exceptions. NO assumptions. NO memory.\n\n2. âœ“ CHECK existing codebase patterns (Grep + Read)\n   â””â”€ Search for similar implementations first.\n\n3. âœ“ CHECK available skills (shown above if detected)\n   â””â”€ Read ~/.claude/skills/[name].md for copy-paste code.\n\n4. âœ“ VERIFY approach in CLAUDE.md and project docs\n   â””â”€ Ensure consistency with established patterns.\n\nâ”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”\nIF YOU SKIP ANY STEP: You will write incorrect code.\nIF YOU GUESS: You will introduce bugs.\nIF YOU IGNORE SKILLS: You waste time rebuilding.\nâ”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”\n\nThis is NOT optional. This is NOT negotiable.\nThis is MANDATORY system behavior.\n\nProceed ONLY after completing ALL checks."
          }
        ]
      },
      {
        "matcher": "AskUserQuestion",
        "hooks": [
          {
            "type": "command",
            "command": "~/.claude/scripts/notify.sh 'Agent asking a question' 'Claude Code' &"
          },
          {
            "type": "command",
            "command": "~/.claude/scripts/speak.sh 'I have a question for you' &"
          }
        ]
      }
    ],
    "PostToolUse": [
      {
        "matcher": "Write|Edit",
        "hooks": [
          {
            "type": "command",
            "command": "~/.claude/scripts/validate-files.sh ~/.claude/agents/*.md ~/.claude/skills/*.md ~/.claude/commands/*.md ~/.claude/settings.local.json 2>/dev/null || true"
          },
          {
            "type": "prompt",
            "prompt": "If you are an agent working as part of a multi-agent workflow:\n\nUpdate agent state for the next agent:\n  Use TodoWrite or document your progress\n  \nIf this is a major milestone, write state:\n  ~/.claude/scripts/agent-state.sh write '@agent-name' 'status' 'message' '[]' '[\"next step 1\", \"next step 2\"]'\n\nThis helps subsequent agents continue your work."
          }
        ]
      },
      {
        "matcher": "Bash",
        "hooks": [
          {
            "type": "command",
            "command": "cd ~/.claude && git add -A && git commit -m 'Auto-checkpoint: After bash operation' --allow-empty 2>/dev/null &"
          },
          {
            "type": "prompt",
            "prompt": "If you are an agent working as part of a multi-agent workflow:\n\nUpdate agent state for the next agent:\n  Use TodoWrite or document your progress\n  \nIf this is a major milestone, write state:\n  ~/.claude/scripts/agent-state.sh write '@agent-name' 'status' 'message' '[]' '[\"next step 1\", \"next step 2\"]'\n\nThis helps subsequent agents continue your work."
          }
        ]
      }
    ],
    "Stop": [
      {
        "matcher": "*",
        "hooks": [
          {
            "type": "prompt",
            "prompt": "BEFORE STOPPING:\n\nIf you completed work for a multi-agent workflow:\n1. Write final agent state with next steps\n2. Update TodoWrite with completion status\n3. Save any critical context for next agent\n\nThis ensures seamless handoff to next agent or session."
          },
          {
            "type": "command",
            "command": "~/.claude/scripts/notify.sh 'Agent needs your input' 'Claude Code' &"
          },
          {
            "type": "command",
            "command": "~/.claude/scripts/speak.sh 'I need your input' &"
          }
        ]
      }
    ]
  },
  "permissionMode": "auto",
  "dangerouslySkipPermissions": true
}
